var easy1 = {
  init: [
    1, 1, 0, 0, 0, 0, 0, 1, 1,
    0, 0, 0, 1, 1, 0, 0, 1, 1,
    0, 0, 0, 0, 0, 0, 1, 0, 1,
    0, 0, 1, 1, 0, 0, 0, 0, 1,
    1, 1, 0, 0, 1, 0, 0, 1, 1,
    1, 0, 0, 0, 0, 1, 1, 0, 0,
    1, 0, 1, 0, 0, 0, 0, 0, 0,
    1, 1, 0, 0, 1, 1, 0, 0, 0,
    1, 1, 0, 0, 0, 0, 0, 1, 1
  ],
  key: [
    7, 5, 2, 3, 1, 6, 8, 4, 9,
    4, 3, 6, 8, 9, 5, 7, 2, 1,
    8, 1, 9, 7, 4, 2, 6, 5, 3,
    9, 4, 8, 6, 3, 7, 2, 1, 5,
    6, 2, 1, 9, 5, 8, 4, 3, 7,
    3, 7, 5, 1, 2, 4, 9, 6, 8,
    2, 8, 4, 5, 7, 1, 3, 9, 6,
    1, 9, 7, 4, 6, 3, 5, 8, 2,
    5, 6, 3, 2, 8, 9, 1, 7, 4
  ]
};

var easy2 = {
  init: [
    0, 1, 0, 0, 0, 1, 0, 0, 0,
    1, 0, 0, 1, 1, 1, 0, 0, 1,
    1, 0, 0, 0, 0, 0, 1, 0, 0,
    1, 1, 0, 0, 1, 1, 0, 1, 0,
    0, 0, 1, 0, 0, 0, 1, 0, 0,
    0, 1, 0, 1, 1, 0, 0, 1, 1,
    0, 0, 1, 0, 0, 0, 0, 0, 1,
    1, 0, 0, 1, 1, 1, 0, 0, 1,
    0, 0, 0, 1, 0, 0, 0, 1, 0
  ],
  key: [
    6, 2, 1, 9, 8, 3, 5, 4, 7,
    4, 7, 9, 6, 2, 5, 8, 3, 1,
    3, 5, 8, 1, 4, 7, 9, 2, 6,
    8, 9, 4, 7, 1, 6, 3, 5, 2,
    7, 1, 5, 8, 3, 2, 4, 6, 9,
    2, 6, 3, 4, 5, 9, 1, 7, 8,
    5, 8, 6, 2, 9, 4, 7, 1, 3,
    1, 4, 7, 3, 6, 8, 2, 9, 5,
    9, 3, 2, 5, 7, 1, 6, 8, 4
  ]
};

var easy3 = {
  init: [
    1,0,1,1,0,0,0,0,0,
    0,1,0,1,0,1,1,0,0,
    0,0,1,1,0,0,0,0,0,
    0,1,1,0,1,1,0,1,0,
    1,0,0,0,1,0,0,0,1,
    0,1,0,1,1,0,1,1,0,
    0,0,0,0,0,1,1,0,0,
    0,0,1,1,0,1,0,1,0,
    0,0,0,0,0,1,1,0,1
  ],
  key: [
    9, 2, 8, 5, 6, 1, 7, 3, 4,
    6, 7, 1, 4, 9, 3, 8, 5, 2,
    4, 3, 5, 7, 8, 2, 6, 9, 1,
    2, 4, 6, 9, 3, 5, 1, 8, 7,
    1, 5, 7, 8, 2, 4, 3, 6, 9,
    8, 9, 3, 6, 1, 7, 2, 4, 5,
    7, 1, 9, 3, 4, 8, 5, 2, 6,
    3, 6, 2, 1, 5, 9, 4, 7, 8,
    5, 8, 4, 2, 7, 6, 9, 1, 3
  ]
};

var med1 = {
  init: [
    0, 0, 0, 0, 0, 1, 0, 1, 0,
    1, 0, 0, 0, 0, 1, 0, 1, 0,
    0, 1, 1, 0, 0, 0, 0, 1, 1,
    0, 0, 0, 1, 1, 1, 0, 0, 0,
    1, 0, 1, 1, 0, 1, 1, 0, 1,
    0, 0, 0, 1, 1, 1, 0, 0, 0,
    1, 1, 0, 0, 0, 0, 1, 1, 0,
    0, 1, 0, 1, 0, 0, 0, 0, 1,
    0, 1, 0, 1, 0, 0, 0, 0, 0
  ],
  key: [
    4, 3, 7, 5, 9, 8, 2, 1, 6,
    6, 9, 5, 2, 4, 1, 8, 7, 3,
    1, 8, 2, 6, 3, 7, 9, 5, 4,
    8, 2, 4, 7, 6, 3, 1, 9, 5,
    5, 1, 9, 4, 8, 2, 3, 6, 7,
    7, 6, 3, 9, 1, 5, 4, 2, 8,
    3, 7, 8, 1, 2, 6, 5, 4, 9,
    9, 5, 1, 3, 7, 4, 6, 8, 2,
    2, 4, 6, 8, 5, 9, 7, 3, 1
  ]
};

var med2 = {
  init: [

  ],
  key: [

  ]
};

var med3 = {
  init: [

  ],
  key: [

  ]
};

var hard1 = {
  init: [

  ],
  key: [

  ]
};

var hard2 = {
  init: [

  ],
  key: [

  ]
};

var hard3 = {
  init: [

  ],
  key: [

  ]
};

var blankPuzzle = [
  0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0,
]

var inputCells = [];

var board = [
    "00", "01", "02", "03", "04", "05", "06", "07", "08",
    "09", "10", "11", "12", "13", "14", "15", "16", "17",
    "18", "19", "20", "21", "22", "23", "24", "25", "26",
    "27", "28", "29", "30", "31", "32", "33", "34", "35",
    "36", "37", "38", "39", "40", "41", "42", "43", "44",
    "45", "46", "47", "48", "49", "50", "51", "52", "53",
    "54", "55", "56", "57", "58", "59", "60", "61", "62",
    "63", "64", "65", "66", "67", "68", "69", "70", "71",
    "72", "73", "74", "75", "76", "77", "78", "79", "80"
];

var grid = [
  "00", "01", "02", "03", "04", "05", "06", "07", "08",
  "10", "11", "12", "13", "14", "15", "16", "17", "18",
  "20", "21", "22", "23", "24", "25", "26", "27", "28",
  "30", "31", "32", "33", "34", "35", "36", "37", "38",
  "40", "41", "42", "43", "44", "45", "46", "47", "48",
  "50", "51", "52", "53", "54", "55", "56", "57", "58",
  "60", "61", "62", "63", "64", "65", "66", "67", "68",
  "70", "71", "72", "73", "74", "75", "76", "77", "78",
  "80", "81", "82", "83", "84", "85", "86", "87", "88"
];

var boardLength = board.length;

function resetter() {
  for (var i = 0; i < boardLength; i++) {
    document.getElementById(board[i]).style.background = "#a0c1d1";
  }
}

function displayUserData(){
    document.getElementById("userData").innerHTML = localStorage.getItem("sudoku");
}

function logout(){
    localStorage.removeItem("sudoku");
    displayUserData();
}

//difficulty
function easy() {
  difficulty = 1;
  document.getElementById("easy").style.backgroundColor = "#a0c1d1";
  document.getElementById("med").style.backgroundColor = "#5a7d7c";
  document.getElementById("hard").style.backgroundColor = "#5a7d7c";
}
function med() {
  difficulty = 2;
  document.getElementById("med").style.backgroundColor = "#a0c1d1";
  document.getElementById("easy").style.backgroundColor = "#5a7d7c";
  document.getElementById("hard").style.backgroundColor = "#5a7d7c";
}
function hard() {
  difficulty = 3;
  document.getElementById("hard").style.backgroundColor = "#a0c1d1";
  document.getElementById("easy").style.backgroundColor = "#5a7d7c";
  document.getElementById("med").style.backgroundColor = "#5a7d7c";
}

var easyPuzzles = ["easy1.json", "easy2.json", "easy3.json"];
var medPuzzles = ["med1.json", "med2.json", "med3.json"];
var hardPuzzles = ["hard1.json", "hard2.json", "hard3.json"];

var puzzle;
var current;

function newBoard() {
  current = 1;
  seconds = 0;
  minutes = 0;
  hours = 0;
  clearTimeout(t)
  addClick()
  timer()
  clicks = 0;
  /*resets cell colors and size if pattern was set*/
  for (i = 0; i < cells.length; i++) {
    cells[i].style.border = "2px solid #b5b2c2";
    cells[i].style.color = "#a0c1d1";
  }
  for (var i = 0; i < boardLength; i++) {
    document.getElementById(board[i]).style.background = "#a0c1d1";
    document.getElementById(board[i]).style.border = "2px solid #5a7d7c";
    document.getElementById(board[i]).innerHTML = '<span class="staticcell">' + board[i] + '</span>';
  }

  /*resets board before creating new one*/
  for (i = 0; i < boardLength; i++) {
    document.getElementById(board[i]).innerHTML = '<div><input  id="' + board[i] + '" class="inputcell" maxlength="1"></div>';
  }

  var d = document.getElementById("difficulty");
  var difficulty = d.options[d.selectedIndex].value;

  //XML request. Pulls game data from JSON files.
  var path = "./games/";
  var puzzle;
  if (difficulty == 1) {
    path = path + easyPuzzles[Math.floor(Math.random() * easyPuzzles.length)];
  }
  if (difficulty == 2) {
    path = path + medPuzzles[Math.floor(Math.random() * medPuzzles.length)];
  }
  if (difficulty == 3) {
    path = path + hardPuzzles[Math.floor(Math.random() * hardPuzzles.length)];
  }

  var xmlhttp = new XMLHttpRequest();
  xmlhttp.onreadystatechange = function() {
  if (this.readyState == 4) {
    puzzle = JSON.parse(this.responseText);
  }
  };
  xmlhttp.open("GET", path, false);
  xmlhttp.send();

  var init = puzzle.init;
  var key = puzzle.key;
  for (var i = 0; i < init.length; i++) {
    if (init[i] == 1) {
      document.getElementById(board[i]).innerHTML = '<div class="staticcell">' + key[i] + '</div>';
    }
    else if (init[i] == 0) {
      document.getElementById(board[i]).innerHTML = '<input  id="' + board[i] + '" class="inputcell" maxlength="1">'
    }
  }
  var puzzleString = [];
  for (var i = 0; i < key.length; i++) {
    if (i % 9 == 0) {
      puzzleString.push("<br>" + key[i]);
    }
    else {
      puzzleString.push(key[i]);
    }
  }
  document.getElementById("jsontxt").innerHTML = puzzleString;
  var c = document.getElementById("myCanvas");
  var ctx = c.getContext("2d");
  ctx.font = "30px Impact";
  ctx.fillText("", 10, 50);


};

//Number.isInteger()
function check() {
    var currentBoard = [];
    var correct = 0;
    var squares = document.getElementsByClassName("cell");

    for (var i = 0; i < boardLength; i++) {
      var el = document.getElementById(board[i]);
      var child = el.children[0];
      if (child.tagName == "INPUT") {
        currentBoard.push(parseInt(child.value));
      }
      else if (child.tagName == "DIV") {
        currentBoard.push(parseInt(child.textContent));
      }
    }

    var score = 81;
    var empty = [];
    for (i = 0; i < puzzle["key"].length; i++) {
      if (isNaN(currentBoard[i])) {
        empty.push(board[i]);
        score = score - 1;
      }
      else if (puzzle["key"][i] != currentBoard[i]) {
        document.getElementById(board[i]).style.background = "#D89A9E";
        score = score - 1;
      }
    }
    if (score > 81) {
      setTimeout(resetter, 3000);
    }
    console.log(score);
    if (score == 81) {
      //IF THE PLAYER WINS
      for (var i = 0; i < boardLength; i++) {
        document.getElementById(board[i]).innerHTML = '<div class="staticcell">â˜º</div>';
        document.getElementById(board[i]).style.background = "green";
      }
      var c = document.getElementById("myCanvas");
      var ctx = c.getContext("2d");
      ctx.font = "48px Impact";
      ctx.fillText("You Win!", 10, 50);
      clearTimeout(t);
    }

}
var cells = document.getElementsByClassName("cell");
var clicks = 0;

function pattern() {
  if (current == 1) {
    var sign = prompt("You are in the middle of a game. This will end it. Continue? (Y/N)", "Y");
    if (sign == "N") {
      return;
    }
    if (sign == "Y") {
      current = 0;
    }
  }
  clicks = clicks + 1;
  for (i = 0; i < cells.length; i++) {
    cells[i].style.border = "2px solid black";
  }
  for (i = 0; i < boardLength; i++) {
    document.getElementById(board[i]).innerHTML = "";
    document.getElementById(board[i]).style.border = "2px solid black";
  }

  /*CHECKERBOARD*/
  if (clicks == 1) {
    for (var i = 0; i < boardLength; i++) {
      var temp = i % 2;
      if (temp == 0) {
        document.getElementById(board[i]).style.background = "#232c33";
      }
      if (temp == 1) {
        document.getElementById(board[i]).style.background = "white";
      }
      }
    }

  /*RAINBOW*/
  if (clicks == 2) {
    var tone1 = ["00", "08", "72", "80"];
    var tone2 = ["01", "07", "09", "17", "63", "71", "73", "79"];
    var tone3 = ["02", "06", "10", "16", "18", "26", "54", "64", "74", "62", "70", "78"];
    var tone4 = ["03", "11", "19", "27", "05", "15", "25", "35", "45", "55", "65", "75", "53", "61", "69", "77"];
    var tone5 = ["04", "12", "14", "20", "24", "34", "44", "28", "36", "46", "56", "66", "76", "68", "60", "52"];
    var tone6 = ["13", "23", "33", "43", "51", "59", "67", "57", "47", "37", "29", "21"];
    var tone7 = ["22", "32", "42", "50", "58", "48", "38", "30"];
    var tone8 = ["31", "41", "49", "39"];
    var tone9 = ["40"];
    var tones = [tone1, tone2, tone3, tone4, tone5, tone6, tone7, tone8, tone9];
    var colors = ["#4f000b", "#e71d36", "#f46036", "#e5d352", "#32965d", "#063a74", "#265e92", "#6f5f95", "#fef8ec"];
    for (var i = 0; i < 9; i++) {
      tlength = tones[i].length;
      list = tones[i];
      color = colors[i];
      for (var y = 0; y < tlength; y++) {
        document.getElementById(list[y]).style.background = color;
      }
    }
  }
  /*HEART*/
  if (clicks == 3) {
    var blue = ["00", "01", "02", "03", "04", "05", "06", "07", "08", "72", "73", "74", "75", "76", "77", "78", "79", "80", "09", "10", "13", "16", "17", "18", "27", "36", "45", "46", "54", "55", "56", "63", "64", "65", "66", "68", "69", "70", "71", "60", "61", "62", "52", "53", "44", "35", "26"];
    var black = ["11", "12", "14", "15", "19", "22", "25", "28", "37", "47", "57", "67", "59", "51", "43", "34"];
    var white = ["20"];
    var red = ["21", "23", "24", "29", "30", "31", "32", "33", "38", "39", "40", "41", "48", "49"];
    var dred = ["50", "42", "58"];
    var tones = [blue, black, white, red, dred];
    var colors = ["#2092EC", "#000000", "#ffffff", "#ff0000", "#991200"]
    for (var i = 0; i < 5; i++) {
      tlength = tones[i].length;
      list = tones[i];
      color = colors[i];
      for (var y = 0; y < tlength; y++) {
        document.getElementById(list[y]).style.background = color;
      }
    }
  }
  //green diagonal
  if (clicks == 4) {
    var tone1 = ["00", "08", "16", "24", "24", "32", "40", "48", "56", "64", "72", "80"];
    var tone2 = ["07", "15", "23", "31", "39", "47", "55", "63", "73", "65", "57", "49", "41", "33", "25", "17"];
    var tone3 = ["06", "14", "22", "30", "38", "46", "54", "74", "66", "58", "50", "42", "34", "26"];
    var tone4 = ["05", "13", "21", "29", "37", "45", "35", "43", "51", "59", "67", "75"];
    var tone5 = ["04", "12", "20", "28", "36", "44", "52", "60", "68", "76"];
    var tone6 = ["03", "11", "19", "27", "53", "61", "69", "77"];
    var tone7 = ["62", "70", "78", "02", "10", "18"];
    var tone8 = ["01", "09", "71", "79"];
    var tones = [tone1, tone2, tone3, tone4, tone5, tone6, tone7, tone8];
    var colors = ["#123b32", "#046350", "#2f9682", "#20a187", "#14b393", "#58e0c5", "#95fce8", "#c3faef"]
    for (var i = 0; i < 8; i++) {
      tlength = tones[i].length;
      list = tones[i];
      color = colors[i];
      for (var y = 0; y < tlength; y++) {
        document.getElementById(list[y]).style.background = color;
      }
    }
  }
  //blue diagonal
  if (clicks == 5) {
    beg = -1;
    var colors = ["#031238", "#091b4a", "#021b5c", "#052578", "#0637b1", "#1147d0", "#2b58ca", "#5077d9"];
    for (var i = 0; i < 8; i++) {
      color = colors[i];
      start = beg + 1;
      beg = beg + 1;
      for (var y = 0; y < 10; y++) {
        document.getElementById(board[start]).style.background = color;
        start = start + 8;
      }
    }
    document.getElementById(board[80]).style.background = colors[0];
    clicks = 0;
  }
};

//Assignment 4
//cell click function


function addClick() {
  var td = document.getElementsByClassName("cell");
  for (i = 0; i < td.length; i++) {
    td[i].onclick = click;
  }
}
/*
When any cell is clicked, it temporarily changes color and prints
the row and column location to console.
*/
function click() {
  iden = (grid[board.indexOf(this.id)]).split("");
  function back() {
    for (i = 0; i < boardLength; i++) {
      document.getElementById(board[i]).style.background = "#a0c1d1";
    }
  }
  this.style.background = "#66717E";
  console.log("Row: " + iden[0] + " Column: " + iden[1]);
  var w = setTimeout(back, 2500);
}
var s = setInterval(function() {
})

var seconds = 0;
var minutes = 0;
var hours = 0;
var t;

var timeVal = document.getElementById("timer");

function add() {
  seconds++;
  if (seconds >= 60) {
    seconds = 0;
    minutes++;
    if (minutes >= 60) {
      minutes = 0;
      hours++;
    }
  }
  timeVal.textContent = (hours ? (hours > 9 ? hours : "0" + hours) : "00") + ":" + (minutes ? (minutes > 9 ? minutes : "0" + minutes) : "00") + ":" + (seconds >9 ? seconds : "0" + seconds);
  timer();
}

function timer() {
  t = setTimeout(add, 1000);
}

displayUserData();
